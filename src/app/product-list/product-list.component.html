<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="#">Supermarket</a>


  <div class="col-md-4">{{listFilter}}</div>
  <div>
    FILTER: <input type="text" [(ngModel)]='listFilter' />
  </div>

  {{pageTitle}}
  <a [routerLink]="['ShoppingCart']">
    <i class="fas fa-shopping-cart"></i>
  </a>


</nav>



<div class="row">
  <div class="col-md-1">
    <button class="btn btn-outline-primary" (click)='toggleImage()'>
      {{showImage ? 'Hide' : 'Show'}}
      Image</button>
      <span>${{total}}</span>
  </div>
  <div>

    <table class="table">
      <thead class="col-md-6 ">

        <tr>
          <th *ngIf='showImage'>Image</th>
          <th>Product</th>
          <th>Code</th>
          <th>Description</th>
          <th>Price</th>
          <th>StarRating</th>
          <th>Quantity</th>
          <th>Total</th>


        </tr>
      </thead>
      <tbody *ngFor='let product of filteredProducts'>

        <tr>
          <td *ngIf='showImage'> <img [src]="product.imageUrl" [title]='product.Name' ></td>

          <td>{{product.Name}}</td>
          <td>{{product.Code}}</td>
          <td>{{product.description}}</td>
          <td>USD {{product.price| currency:'USD':'symbol':'1.2-2'}}</td>
          <td>
            <app-star [rating]='product.starRating' (ratingClicked)='onRatingClicked($event)'></app-star>
          </td>
          <td>

            <input
            (keypress)="protect($event)" 
            (keyup)="calculateTotal()" 
            id="qty" type="number" 
            [(ngModel)]="product.Quantity"
            required #Quantity="ngModel" min="0">

          </td>
          <td>
            {{product.price*Quantity.value| currency}}
          </td>
          <td class="col-sm-2">
            <p>
              <button type="button"
                        class="button success large js-btn-add"
                        (click)="addProductToCart(product, 1)">Add To Cart</button>
              <button type="button" class="btn btn-outline-danger">Remove item from cart </button>
            </p>
          </td>

        </tr>


      </tbody>
      <td>Total</td>

      <td>$ {{total}}</td>
    </table>
  </div>
</div>




<div class="col-md-6">
  <button id="checkout">CheckOut</button>
</div>

<a [routerLink]="['Congratulations']">Complete Order</a>